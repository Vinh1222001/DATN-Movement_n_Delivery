<!DOCTYPE html>
<html>
  <head>
    <title>ESP32 Web Server</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body>
    <h1 class="text-3xl font-bold text-blue-600">ESP32 Web Server</h1>
    <p class="text-gray-700 mt-2">This is a simple web page hosted on ESP32.</p>

    <ul class="mt-4 space-y-2">
      <li class="text-lg">
        Line 1: <span id="line-1" class="font-semibold text-red-500">0</span>
      </li>
      <li class="text-lg">
        Line 2: <span id="line-2" class="font-semibold text-red-500">0</span>
      </li>
      <li class="text-lg">
        Line 3: <span id="line-3" class="font-semibold text-red-500">0</span>
      </li>
      <li class="text-lg">
        Line 4: <span id="line-4" class="font-semibold text-red-500">0</span>
      </li>
      <li class="text-lg">
        Line 5: <span id="line-5" class="font-semibold text-red-500">0</span>
      </li>
    </ul>

    <script>
      async function fetchLineData() {
        try {
          const response = await fetch('http://172.20.10.3/line-follower');
          if (!response.ok) throw new Error('Lỗi khi lấy dữ liệu!');

          const myArr = await response.json();

          console.log('Dữ liệu nhận được:', myArr);

          for (let i = 1; i <= 5; i++) {
            document.getElementById(`line-${i}`).textContent = myArr[i - 1];
          }
        } catch (error) {
          console.error('Lỗi:', error);
        }
      }

      setInterval(fetchLineData, 100);
    </script>
  </body>
</html>
